

<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.label :Create_Post  %>
    <%= f.cktext_area :content, placeholder: "Compose new micropost...", id:"message" ,:as => :ckeditor, input_html: {:ckeditor => {:toolbar => 'FULL'}} %>
  </div>
  <%= f.submit "Post", id:"sendButton", class: "btn btn-primary" %>
  <span class="picture" id="micropost_picture">
        <%= f.label :Add_Linkable_Files %>
    <%= f.file_field :attachment%>
  </span>
<% end %>

<!-- <script type="text/javascript">
  $('#micropost_picture').bind('change', function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert('Maximum file size is 5MB. Please choose a smaller file.');
    }
  });
</script> -->

<script type="text/javascript">
  // $(document).ready(function(){
    
  //   for (var name in CKEDITOR.instances) {
  //    var editor = CKEDITOR.instances[name];
  //    if (editor) { editor.destroy(true); }
  //   }

  //    CKEDITOR.replace('micropost_content');
  //   //jQuery('#cke_cke_micropost_content').remove();
  //   });
  
 // $(document).ready(function(){
//   setTimeout(function(){
//    $('#sendButton').prop('disabled',true);

//     if($('.cke_editable').firstElementChild.textContent.length >0){
//            $('#sendButton').prop('disabled', false);     
//         }

//     $('#message').keyup(function(){
//         if($('.cke_editable').textContent.length >0){
//            $('#sendButton').prop('disabled', false);     
//         }  
//     })
// //}); 
// });

  setTimeout(function() {
    if(jQuery('.cke_editor_micropost_content').length > 1){
      jQuery('.cke_editor_micropost_content').last().remove()
    }
  })
  

</script>
<!-- cke_micropost_content

cke_micropost_content -->